<div class="container">
  <app-search-bar (searchEvent)="searchItems($event)"></app-search-bar>

  <!-- Search list -->
  <div class="shopping-list-container" *ngIf="searchedItems.length > 0">
    <ul class="shopping-list">
      <li *ngFor="let item of searchedItems" class="list-item" [class.checked]="item.isChecked">
        {{item.name}} ({{item.quantity}})

        <form *ngIf="editedItem == item.name" class="quantity-form" (ngSubmit)="updateQuantity(item)">
          <label for="quantity-input" class="quantity-label">Quantity: </label>
          <input id="quantity-input" type="number" min=1 placeholder="New quantity..." class="quantity-input"
            [formControl]="quantityInput" />

          <button type="submit" class="quantity-submit-button">Save</button>
        </form>

        <div class="button-container" *ngIf="editedItem !== item.name">
          <button class="check-button" (click)="checkItem(item)" *ngIf="!item.isChecked">
            <img src="../../assets/images/check.svg" class="check-image">

            <div class="button-tooltip">
              Check
            </div>
          </button>

          <button class="check-button" (click)="checkItem(item)" *ngIf="item.isChecked">
            <img src="../../assets/images/uncheck.svg" class="uncheck-image">

            <div class="button-tooltip">
              Uncheck
            </div>
          </button>

          <button class="edit-button" (click)="editItemQuantity(item)">
            <img src="assets/images/edit.svg" class="edit-image">

            <div class="button-tooltip">
              Edit Quantity
            </div>
          </button>

          <button class="delete-button" (click)="deleteItem(item)">
            <img src="../../assets/images/delete.svg" class="delete-image">

            <div class="button-tooltip">
              Delete
            </div>
          </button>
        </div>
      </li>
    </ul>
  </div>

  <!-- Default list -->
  <div class="shopping-list-container" *ngIf="listItems.length > 0 && searchedItems.length <= 0">
    <ul class="shopping-list" [@itemAnimation]>
      <li *ngFor="let item of listItems" class="list-item" [class.checked]="item.isChecked">
        {{item.name}} ({{item.quantity}})

        <form *ngIf="editedItem == item.name" class="quantity-form" (ngSubmit)="updateQuantity(item)">
          <label for="quantity-input" class="quantity-label">Quantity: </label>
          <input id="quantity-input" type="number" min=1 placeholder="New quantity..." class="quantity-input"
            [formControl]="quantityInput" />

          <button type="submit" class="quantity-submit-button">Save</button>
        </form>

        <div class="button-container" *ngIf="editedItem !== item.name">
          <button class="check-button" (click)="checkItem(item)" *ngIf="!item.isChecked">
            <img src="../../assets/images/check.svg" class="check-image">

            <div class="button-tooltip">
              Check
            </div>
          </button>

          <button class="check-button" (click)="checkItem(item)" *ngIf="item.isChecked">
            <img src="../../assets/images/uncheck.svg" class="uncheck-image">

            <div class="button-tooltip">
              Uncheck
            </div>
          </button>

          <button class="edit-button" (click)="editItemQuantity(item)">
            <img src="assets/images/edit.svg" class="edit-image">

            <div class="button-tooltip">
              Edit Quantity
            </div>
          </button>

          <button class="delete-button" (click)="deleteItem(item)">
            <img src="../../assets/images/delete.svg" class="delete-image">

            <div class="button-tooltip">
              Delete
            </div>
          </button>
        </div>
      </li>
    </ul>
  </div>

  <mat-spinner color="accent" *ngIf="loading"></mat-spinner>

  <div class="empty-list-text" *ngIf="listItems.length <= 0 && !loading">
    No items found.
  </div>
</div>